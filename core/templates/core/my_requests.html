{% extends 'base.html' %}

{% block title %}Мои заявки - Сервисная система{% endblock %}

{% block content %}
  <h2>Мои заявки</h2>

  {% if requests %}
    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ccc;">
      <thead>
        <tr style="background-color: #007acc; color: white;">
          <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Корпус</th>
          <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Аудитория</th>
          <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Устройство</th>
          <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Дата заявки</th>
          <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Статус</th>
        </tr>
      </thead>
      <tbody>
        {% for req in requests %}
          <tr>
            <td style="padding: 10px; border: 1px solid #ccc;">{{ req.device.cabinet.building }}</td>
            <td style="padding: 10px; border: 1px solid #ccc;">{{ req.device.cabinet.number }}</td>
            <td style="padding: 10px; border: 1px solid #ccc;">{{ req.device.name }}</td>
            <td style="padding: 10px; border: 1px solid #ccc;">{{ req.created_at|date:"d.m.Y H:i" }}</td>
            <td style="padding: 10px; border: 1px solid #ccc; font-weight: 600; color: {% if req.is_completed %}green{% else %}orange{% endif %};">
              {{ req.status }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>У вас пока нет заявок.</p>
  {% endif %}
{% endblock %}
