{% extends 'base.html' %}

{% block title %}–ü–∞–Ω–µ–ª—å –∏–Ω–∂–µ–Ω–µ—Ä–∞ - –°–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞{% endblock %}

{% block content %}
<div class="container">
  <h2 style="margin-bottom: 20px;">üõ† –ü–∞–Ω–µ–ª—å –∏–Ω–∂–µ–Ω–µ—Ä–∞</h2>

  {% if requests %}
    <div style="overflow-x: auto;">
      <table style="width: 100%; border-collapse: collapse; border: 1px solid #ccc;">
        <thead style="background-color: #f5f5f5;">
          <tr>
            <th style="border: 1px solid #ccc; padding: 10px;">#</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–ö–æ—Ä–ø—É—Å</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–ö–∞–±–∏–Ω–µ—Ç</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–î–∞—Ç–∞ –∑–∞—è–≤–∫–∏</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–°—Ç–∞—Ç—É—Å</th>
            <th style="border: 1px solid #ccc; padding: 10px;">–î–µ–π—Å—Ç–≤–∏–µ</th>
          </tr>
        </thead>
        <tbody>
          {% for request in requests %}
          <tr>
            <td style="border: 1px solid #ccc; padding: 10px;">{{ request.id }}</td>
            <td style="border: 1px solid #ccc; padding: 10px;">{{ request.device.name }}</td>
            <td style="border: 1px solid #ccc; padding: 10px;">{{ request.device.cabinet.building }}</td>
            <td style="border: 1px solid #ccc; padding: 10px;">{{ request.device.cabinet.number }}</td>
            <td style="border: 1px solid #ccc; padding: 10px;">{{ request.created_at|date:"d.m.Y H:i" }}</td>
            <td style="border: 1px solid #ccc; padding: 10px;">
              {% if request.is_completed %}
                <span style="color: green; font-weight: bold;">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
              {% else %}
                <span style="color: orange; font-weight: bold;">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
              {% endif %}
            </td>
            <td style="border: 1px solid #ccc; padding: 10px;">
              <a href="{% url 'engineer_request_detail' request.id %}" style="color: #007acc; font-weight: 500;">–û—Ç–∫—Ä—ã—Ç—å</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>–ù–µ—Ç –∑–∞—è–≤–æ–∫, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –≤–∞–º.</p>
  {% endif %}
</div>
{% endblock %}
